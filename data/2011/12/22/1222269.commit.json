{
  "when": "2011-12-22T09:55:34-05:00", 
  "who": "kasun", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-0,0 +1,121", 
          "lines": [
            "+<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n", 
            "+<!--\n", 
            "+  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "+  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "+  ~  distributed with this work for additional information\n", 
            "+  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "+  ~  to you under the Apache License, Version 2.0 (the\n", 
            "+  ~  \"License\"); you may not use this file except in compliance\n", 
            "+  ~  with the License.  You may obtain a copy of the License at\n", 
            "+  ~\n", 
            "+  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "+  ~\n", 
            "+  ~  Unless required by applicable law or agreed to in writing,\n", 
            "+  ~  software distributed under the License is distributed on an\n", 
            "+  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "+  ~  KIND, either express or implied.  See the License for the\n", 
            "+  ~  specific language governing permissions and limitations\n", 
            "+  ~  under the License.\n", 
            "+  -->\n", 
            "+\n", 
            "+<document>\n", 
            "+    <properties>\n", 
            "+        <title>Apache Synapse - Sample 800</title>\n", 
            "+    </properties>\n", 
            "+    <body>\n", 
            "+        <section name=\"Sample 800: Introduction to REST API\">\n", 
            "+            <div class=\"xmlConf\">&lt;!-- An empty flat synapse configuration shipped with the WSO2 ESB --&gt;\n", 
            "+&lt;definitions xmlns=\"http://ws.apache.org/ns/synapse\"&gt;\n", 
            "+\n", 
            "+    &lt;!-- You can add any flat sequences, endpoints, etc.. to this synapse.xml file if you do\n", 
            "+    *not* want to keep the artifacts in several files --&gt;\n", 
            "+&lt;api name=\"StockQuoteAPI\" context=\"/stockquote\"&gt;\n", 
            "+   &lt;resource uri-template=\"/view/{symbol}\" methods=\"GET\"&gt;\n", 
            "+      &lt;inSequence&gt;\n", 
            "+         &lt;payloadFactory&gt;\n", 
            "+\t    &lt;format&gt;\n", 
            "+\t\t&lt;m0:getQuote xmlns:m0=\"http://services.samples\"&gt;\n", 
            "+\t            &lt;m0:request&gt;\n", 
            "+        \t       &lt;m0:symbol&gt;$1&lt;/m0:symbol&gt;\n", 
            "+\t            &lt;/m0:request&gt;\n", 
            "+        \t &lt;/m0:getQuote&gt;\n", 
            "+\t    &lt;/format&gt;\n", 
            "+\t    &lt;args&gt;\n", 
            "+\t\t&lt;arg expression=\"get-property('uri.var.symbol')\"/&gt;\n", 
            "+\t    &lt;/args&gt;\n", 
            "+\t &lt;/payloadFactory&gt;\n", 
            "+\t &lt;send&gt;\n", 
            "+\t    &lt;endpoint&gt;\n", 
            "+\t\t&lt;address uri=\"http://localhost:9000/services/SimpleStockQuoteService\" format=\"soap11\"/&gt;\n", 
            "+\t    &lt;/endpoint&gt;\n", 
            "+\t &lt;/send&gt;\n", 
            "+      &lt;/inSequence&gt;\n", 
            "+      &lt;outSequence&gt;\n", 
            "+\t &lt;send/&gt;\n", 
            "+      &lt;/outSequence&gt;\n", 
            "+   &lt;/resource&gt;\n", 
            "+   &lt;resource url-pattern=\"/order/*\" methods=\"POST\"&gt;\n", 
            "+      &lt;inSequence&gt;\n", 
            "+        &lt;property name=\"FORCE_SC_ACCEPTED\" value=\"true\" scope=\"axis2\"/&gt;\n", 
            "+\t&lt;property name=\"OUT_ONLY\" value=\"true\"/&gt;\n", 
            "+\t&lt;send&gt;\n", 
            "+            &lt;endpoint&gt;\n", 
            "+                &lt;address uri=\"http://localhost:9000/services/SimpleStockQuoteService\" format=\"soap11\"/&gt;\n", 
            "+            &lt;/endpoint&gt;\n", 
            "+         &lt;/send&gt;\n", 
            "+      &lt;/inSequence&gt;\n", 
            "+   &lt;/resource&gt;\n", 
            "+&lt;/api&gt;\n", 
            "+&lt;/definitions&gt;</div>\n", 
            "+            <subsection name=\"Objective\">\n", 
            "+                <p>\n", 
            "+                    Objective: Introduction to REST API\n", 
            "+                </p>\n", 
            "+            </subsection>\n", 
            "+            <subsection name=\"Pre-requisites\">\n", 
            "+                <p>\n", 
            "+                    <ul>\n", 
            "+                        <li>\n", 
            "+                            Deploy the SimpleStockQuoteService in the sample Axis2 server and start Axis2 Server\n", 
            "+                        </li>\n", 
            "+                        <li>\n", 
            "+                            Start Synapse using the configuration numbered 800 (repository/conf/sample/synapse_sample_800.xml)\n", 
            "+                            <div class=\"command\">\n", 
            "+                                Unix/Linux: sh synapse.sh -sample 800<br/>\n", 
            "+                                Windows: synapse.bat -sample 800\n", 
            "+                            </div>\n", 
            "+                        </li>\n", 
            "+                    </ul>\n", 
            "+                </p>\n", 
            "+            </subsection>\n", 
            "+            <subsection name=\"Executing the REST Client\">\n", 
            "+                <p>\n", 
            "+                    You might need a REST client like curl to test this\n", 
            "+                </p>\n", 
            "+                <div class=\"command\">curl -v http://127.0.0.1:8280/stockquote/view/IBM</div>\n", 
            "+                <div class=\"command\">curl -v http://127.0.0.1:8280/stockquote/view/MSFT</div>\n", 
            "+\n", 
            "+                <p>\n", 
            "+                    The above GET calls will be handled by the first resource in the StockQuoteAPI.\n", 
            "+                    These REST calls will get converted into SOAP calls and will be sent to the Axis2\n", 
            "+                    server. Response will be sent to the client in POX format.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    The following command POSTs a simple XML to the ESB. Save following sample place\n", 
            "+                    order request as  \"placeorder.xml\" file in your local file system and execute the\n", 
            "+                    command. That is used to invoke a SOAP service. ESB returns the 202 response back to the client.\n", 
            "+                </p>\n", 
            "+                <div class=\"command\">curl -v -d @placeorder.xml -H \"Content-type: application/xml\" http://127.0.0.1:8280/stockquote/order/</div>\n", 
            "+\n", 
            "+                <div class=\"xmlConf\">&lt;placeOrder xmlns=\"http://services.samples\"&gt;\n", 
            "+  &lt;order&gt;\n", 
            "+     &lt;price&gt;50&lt;/price&gt;\n", 
            "+     &lt;quantity&gt;10&lt;/quantity&gt;\n", 
            "+     &lt;symbol&gt;IBM&lt;/symbol&gt;\n", 
            "+  &lt;/order&gt;\n", 
            "+&lt;/placeOrder&gt;</div>\n", 
            "+            </subsection>\n", 
            "+        </section>\n", 
            "+        <p><a href=\"../samples.html\">Back to Catalog</a></p>\n", 
            "+    </body>\n", 
            "+</document>\n", 
            "\\ No newline at end of file\n"
          ]
        }
      ], 
      "to": "scratch/hiranya/website/src/site/xdoc/userguide/samples/sample800.xml", 
      "from": "scratch/hiranya/website/src/site/xdoc/userguide/samples/sample800.xml"
    }
  ], 
  "id": "1222269"
}