{
  "when": "2011-12-19T22:49:40-05:00", 
  "who": "uswick", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-173,8 +173,13", 
          "lines": [
            " <a href=\"#Sample59\">Sample 59: Weighted load balancing between 3 endpoints</a></li>\n", 
            " <li>\n", 
            " <a href=\"#Sample60\">Sample 60: Service dynamic load balancing between 2 Service nodes</a></li>\n", 
            "-</ul></li>    \n", 
            " <li>\n", 
            "+<a href=\"#Sample60\">Sample 61: Routing a message to a static list of recipients</a></li>\n", 
            "+<li>\n", 
            "+<a href=\"#Sample61\">Sample 62: Routing a message to a dynamic list of recipients</a></li>\n", 
            "+<li>\n", 
            "+<a href=\"#Sample62\">Sample 63: Routing a message to a dynamic list of recipients and aggregating the responses</a></li></ul></li>\n", 
            "+<li>\n", 
            " <a href=\"#MessageMediationQoS\">Quality of Service addition or deduction samples in message mediation</a>\n", 
            " <ul>\n", 
            " <li>\n"
          ]
        }, 
        {
          "locn": "-1968,6 +1973,190", 
          "lines": [
            " For the sake of simplicity, we have shown how to run this sample for one clustering domain at a time. However, you can make a copy of the axis2Server directory, and setup both domains simultaneously, and run the sample client to see how the requests are load balanced in a round-robin manner within each clustering domain.\n", 
            " </p>\n", 
            " \n", 
            "+\n", 
            "+<h2><a name=\"Sample61\">Sample 61: Routing a message to a static list of recipients</a></h2>\n", 
            "+<pre xml:space=\"preserve\">\n", 
            "+&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n", 
            "+&lt;definitions xmlns=\"http://ws.apache.org/ns/synapse\"&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=\"main\" onError=\"errorHandler\"&gt;\n", 
            "+        &lt;in&gt;\n", 
            "+            &lt;send&gt;\n", 
            "+                &lt;endpoint&gt;\n", 
            "+                    &lt;!--List of Recipients (static)--&gt;\n", 
            "+                    &lt;recipientlist&gt;\n", 
            "+                        &lt;endpoint&gt;\n", 
            "+                            &lt;address uri=\"http://localhost:9001/services/SimpleStockQuoteService\"/&gt;\n", 
            "+                        &lt;/endpoint&gt;\n", 
            "+                        &lt;endpoint&gt;\n", 
            "+                            &lt;address uri=\"http://localhost:9002/services/SimpleStockQuoteService\"/&gt;\n", 
            "+                        &lt;/endpoint&gt;\n", 
            "+\t\t\t&lt;endpoint&gt;\n", 
            "+                            &lt;address uri=\"http://localhost:9003/services/SimpleStockQuoteService\"/&gt;\n", 
            "+                        &lt;/endpoint&gt;\n", 
            "+                    &lt;/recipientlist&gt;\n", 
            "+                &lt;/endpoint&gt;\n", 
            "+           &lt;/send&gt;\n", 
            "+            &lt;drop/&gt;\n", 
            "+        &lt;/in&gt;\n", 
            "+\n", 
            "+        &lt;out&gt;\n", 
            "+            &lt;log level=\"full\"/&gt;\n", 
            "+            &lt;drop/&gt;\n", 
            "+        &lt;/out&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=\"errorHandler\"&gt;\n", 
            "+        &lt;makefault response=\"true\"&gt;\n", 
            "+            &lt;code xmlns:tns=\"http://www.w3.org/2003/05/soap-envelope\" value=\"tns:Receiver\"/&gt;\n", 
            "+            &lt;reason value=\"COULDN'T SEND THE MESSAGE TO THE SERVER.\"/&gt;\n", 
            "+        &lt;/makefault&gt;\n", 
            "+        &lt;send/&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+&lt;/definitions&gt;\n", 
            "+</pre>\n", 
            "+<p><strong>Objective: Demonstrate message routing to a set of\n", 
            "+static endpoints</strong> </p>\n", 
            "+\n", 
            "+<p><strong>Prerequisites:</strong> </p>\n", 
            "+\n", 
            "+<p>Start ESB with sample configuration 61. (i.e. synapse -sample 61) </p>\n", 
            "+\n", 
            "+<p>Deploy the SimpleStockQuoteService and start three instances of sample Axis2 server as mentioned in sample 52.</p>\n", 
            "+\n", 
            "+<p>Above configuration routes a cloned copy of a message to each recipient defined within the static recipient list.\n", 
            "+<br/>To test this, run the stockquote client to send an out-only message: </p>\n", 
            "+<pre xml:space=\"preserve\">ant stockquote -Dmode=placeorder -Dtrpurl=http://localhost:8280/</pre>\n", 
            "+\n", 
            "+<p>This client sends a request to the SimpleStockQuoteService through the\n", 
            "+ESB. ESB will create cloned copies of the message and route to the three endpoints\n", 
            "+mentioned in the configuration. SimpleStockQuoteService prints the details of the placed\n", 
            "+order. If you examine the console output of each server, you can see that requests are\n", 
            "+processed by the three servers as follows: </p>\n", 
            "+<pre xml:space=\"preserve\">Accepted order #1 for : 15738 stocks of IBM at $ 185.51155223506518\n", 
            "+</pre>\n", 
            "+\n", 
            "+<p>Now shutdown MyServer1 and resend the request. You will observe that requests are still processed by MyServer2 and MyServer3.</p>\n", 
            "+\n", 
            "+<h2><a name=\"Sample62\">Sample 62: Routing a message to a dynamic list of recipients</a></h2>\n", 
            "+<pre xml:space=\"preserve\">\n", 
            "+&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n", 
            "+&lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&gt;\n", 
            "+\n", 
            "+    &lt;!-- the SimpleURLRegistry allows access to a URL based registry (e.g. file:/// or http://) --&gt;\n", 
            "+    &lt;registry provider=&quot;org.apache.synapse.registry.url.SimpleURLRegistry&quot;&gt;\n", 
            "+        &lt;!-- the root property of the simple URL registry helps resolve a resource URL as root + key --&gt;\n", 
            "+        &lt;parameter name=&quot;root&quot;&gt;file:repository/conf/sample/resources/&lt;/parameter&gt;\n", 
            "+        &lt;!-- all resources loaded from the URL registry would be cached for this number of milli seconds --&gt;\n", 
            "+        &lt;parameter name=&quot;cachableDuration&quot;&gt;15000&lt;/parameter&gt;\n", 
            "+    &lt;/registry&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=&quot;main&quot; onError=&quot;errorHandler&quot;&gt;\n", 
            "+        &lt;in&gt;\n", 
            "+            &lt;property name=&quot;OUT_ONLY&quot; value=&quot;true&quot; /&gt;\n", 
            "+            &lt;property name=&quot;FORCE_SC_ACCEPTED&quot; scope=&quot;axis2&quot; value=&quot;true&quot; /&gt;\n", 
            "+\t    &lt;!--Dynamic Reclipient List--&gt;\n", 
            "+            &lt;send&gt;\n", 
            "+                &lt;endpoint&gt;\n", 
            "+                    &lt;recipientlist&gt;\n", 
            "+                        &lt;endpoints value=&quot;{get-property(&#39;registry&#39;,&#39;recipients/EP_LIST&#39;)}&quot;/&gt;\n", 
            "+                    &lt;/recipientlist&gt;\n", 
            "+                &lt;/endpoint&gt;\n", 
            "+            &lt;/send&gt;\n", 
            "+            &lt;drop/&gt;\n", 
            "+        &lt;/in&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=&quot;errorHandler&quot;&gt;\n", 
            "+        &lt;makefault response=&quot;true&quot;&gt;\n", 
            "+            &lt;code xmlns:tns=&quot;http://www.w3.org/2003/05/soap-envelope&quot; value=&quot;tns:Receiver&quot;/&gt;\n", 
            "+            &lt;reason value=&quot;COULDN&#39;T SEND THE MESSAGE TO THE SERVER.&quot;/&gt;\n", 
            "+        &lt;/makefault&gt;\n", 
            "+        &lt;send/&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+&lt;/definitions&gt;\n", 
            "+</pre>\n", 
            "+<p><strong>Objective: Demonstrate message routing to a set of\n", 
            "+dynamic endpoints</strong> </p>\n", 
            "+\n", 
            "+<p><strong>Prerequisites:</strong> </p>\n", 
            "+\n", 
            "+<p>Start ESB with sample configuration 62. (i.e. synapse -sample 62) </p>\n", 
            "+\n", 
            "+<p>Deploy the SimpleStockQuoteService and start three instances of sample Axis2 server as mentioned in sample 52.</p>\n", 
            "+\n", 
            "+<p>This sample does the same thing as in sample 60. The difference is that unlike in sample 60, this sample defines\n", 
            "+the endpoints as a dynamic list of recipients.\n", 
            "+<br/>To test this, run the stockquote client to send an out-only message: </p>\n", 
            "+<pre xml:space=\"preserve\">ant stockquote -Dmode=placeorder -Dtrpurl=http://localhost:8280/</pre>\n", 
            "+\n", 
            "+<p>The behaviour of this sample should be similar to that of sample 60</p>\n", 
            "+\n", 
            "+<h2><a name=\"Sample63\">Sample 63: Routing a message to a dynamic list of recipients and aggregating responses</a></h2>\n", 
            "+<pre xml:space=\"preserve\">\n", 
            "+&lt;definitions xmlns=&quot;http://ws.apache.org/ns/synapse&quot;&gt;\n", 
            "+\n", 
            "+    &lt;!-- the SimpleURLRegistry allows access to a URL based registry (e.g. file:/// or http://) --&gt;\n", 
            "+    &lt;registry provider=&quot;org.apache.synapse.registry.url.SimpleURLRegistry&quot;&gt;\n", 
            "+        &lt;!-- the root property of the simple URL registry helps resolve a resource URL as root + key --&gt;\n", 
            "+        &lt;parameter name=&quot;root&quot;&gt;file:repository/conf/sample/resources/&lt;/parameter&gt;\n", 
            "+        &lt;!-- all resources loaded from the URL registry would be cached for this number of milli seconds --&gt;\n", 
            "+        &lt;parameter name=&quot;cachableDuration&quot;&gt;15000&lt;/parameter&gt;\n", 
            "+    &lt;/registry&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=&quot;main&quot; onError=&quot;errorHandler&quot;&gt;\n", 
            "+        &lt;in&gt;\n", 
            "+\t    &lt;!--Dynamic Recipient List--&gt;\n", 
            "+            &lt;send&gt;\n", 
            "+                &lt;endpoint&gt;\n", 
            "+                   &lt;recipientlist&gt;\n", 
            "+                        &lt;endpoints value=&quot;{get-property(&#39;registry&#39;,&#39;recipients/EP_LIST&#39;)}&quot;/&gt;\n", 
            "+                    &lt;/recipientlist&gt;\n", 
            "+                &lt;/endpoint&gt;\n", 
            "+            &lt;/send&gt;\n", 
            "+            &lt;drop/&gt;\n", 
            "+        &lt;/in&gt;\n", 
            "+\n", 
            "+        &lt;out&gt;\n", 
            "+\t    &lt;log level=&quot;full&quot;/&gt;\n", 
            "+\t    &lt;!--Aggregate responses--&gt;\n", 
            "+            &lt;aggregate&gt;\n", 
            "+              &lt;onComplete xmlns:m0=&quot;http://services.samples&quot;\n", 
            "+                          expression=&quot;//m0:getQuoteResponse&quot;&gt;\n", 
            "+                 &lt;send/&gt;\n", 
            "+\t      &lt;/onComplete&gt;\n", 
            "+\t    &lt;/aggregate&gt;\n", 
            "+        &lt;/out&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+\n", 
            "+    &lt;sequence name=&quot;errorHandler&quot;&gt;\n", 
            "+        &lt;makefault response=&quot;true&quot;&gt;\n", 
            "+            &lt;code xmlns:tns=&quot;http://www.w3.org/2003/05/soap-envelope&quot; value=&quot;tns:Receiver&quot;/&gt;\n", 
            "+            &lt;reason value=&quot;COULDN&#39;T SEND THE MESSAGE TO THE SERVER.&quot;/&gt;\n", 
            "+        &lt;/makefault&gt;\n", 
            "+        &lt;send/&gt;\n", 
            "+    &lt;/sequence&gt;\n", 
            "+&lt;/definitions&gt;\n", 
            "+</pre>\n", 
            "+<p><strong>Objective: Demonstrate message routing to a set of\n", 
            "+dynamic endpoints and aggregate responses</strong> </p>\n", 
            "+\n", 
            "+<p><strong>Prerequisites:</strong> </p>\n", 
            "+\n", 
            "+<p>Start ESB with sample configuration 63. (i.e. synapse -sample 63) </p>\n", 
            "+\n", 
            "+<p>Deploy the SimpleStockQuoteService and start three instances of sample Axis2 server as mentioned in sample 52.</p>\n", 
            "+\n", 
            "+<p>Above configuration routes a cloned copy of a message to each recipient defined within the dynamic recipient list.\n", 
            "+Each recipient will respond back with a stock quote. When all the responses appear to synapse those resonses will be\n", 
            "+aggregated to form the resultant response which will be sent back to the client.\n", 
            "+<br/>To test this, invoke the client as follows: </p>\n", 
            "+<pre xml:space=\"preserve\">ant stockquote -Dtrpurl=http://localhost:8280/</pre>\n", 
            "+\n", 
            "+<p>If you sent your client request through a TCP based conversation monitoring tool such as TCPMon, you will notice the\n", 
            "+structrue of the aggregated response message.</p>\n", 
            "+\n", 
            "+\n", 
            " <h1><a name=\"MessageMediationQoS\" id=\"MessageMediationQoS\">Quality of Service addition or deduction samples in message mediation</a> </h1>\n", 
            " <h2>\n", 
            " <a name=\"Sample100\" id=\"Sample100\">Sample 100: Using WS-Security for outgoing messages</a></h2>\n"
          ]
        }
      ], 
      "to": "java/src/site/xdoc/Synapse_Samples.xml", 
      "from": "java/src/site/xdoc/Synapse_Samples.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-38,6 +38,11", 
          "lines": [
            " import org.jaxen.Navigator;\n", 
            " import org.jaxen.function.StringFunction;\n", 
            " \n", 
            "+import javax.activation.DataHandler;\n", 
            "+import java.io.BufferedInputStream;\n", 
            "+import java.io.BufferedReader;\n", 
            "+import java.io.IOException;\n", 
            "+import java.io.InputStreamReader;\n", 
            " import java.text.Format;\n", 
            " import java.text.SimpleDateFormat;\n", 
            " import java.util.List;\n"
          ]
        }, 
        {
          "locn": "-319,7 +324,24", 
          "lines": [
            "                     }\n", 
            "                 } else if (propEntry.getValue() != null) {\n", 
            "                     if (propEntry.getValue() instanceof OMText) {\n", 
            "-                        return ((OMText) propEntry.getValue()).getText();\n", 
            "+                        OMText omText = (OMText) propEntry.getValue();\n", 
            "+                        DataHandler dh = (DataHandler) omText.getDataHandler();\n", 
            "+                        if (omText.getDataHandler() != null) {\n", 
            "+                            try {\n", 
            "+                                InputStreamReader streamReader = new InputStreamReader(dh.getInputStream());\n", 
            "+                                BufferedReader stringReader = new BufferedReader(streamReader);\n", 
            "+                                String omTextString = NULL_STRING;\n", 
            "+                                String tempStr;\n", 
            "+                                while ((tempStr = stringReader.readLine()) != null) {\n", 
            "+                                    omTextString = omTextString + tempStr;\n", 
            "+                                }\n", 
            "+                                return omTextString;\n", 
            "+                            } catch (IOException e) {\n", 
            "+                                return NULL_STRING;\n", 
            "+                            }\n", 
            "+                        } else {\n", 
            "+                            omText.getText();\n", 
            "+                        }\n", 
            "                     }\n", 
            "                     return propEntry.getValue().toString();\n", 
            "                 }\n"
          ]
        }
      ], 
      "to": "java/modules/core/src/main/java/org/apache/synapse/mediators/GetPropertyFunction.java", 
      "from": "java/modules/core/src/main/java/org/apache/synapse/mediators/GetPropertyFunction.java"
    }, 
    {
      "chunks": [
        {
          "locn": "-0,0 +1,55", 
          "lines": [
            "+<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n", 
            "+<!--\n", 
            "+  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "+  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "+  ~  distributed with this work for additional information\n", 
            "+  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "+  ~  to you under the Apache License, Version 2.0 (the\n", 
            "+  ~  \"License\"); you may not use this file except in compliance\n", 
            "+  ~  with the License.  You may obtain a copy of the License at\n", 
            "+  ~\n", 
            "+  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "+  ~\n", 
            "+  ~  Unless required by applicable law or agreed to in writing,\n", 
            "+  ~  software distributed under the License is distributed on an\n", 
            "+  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "+  ~  KIND, either express or implied.  See the License for the\n", 
            "+  ~  specific language governing permissions and limitations\n", 
            "+  ~  under the License.\n", 
            "+  -->\n", 
            "+\n", 
            "+<!--Routing message to 3 static recipients-->        \n", 
            "+<definitions xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+\n", 
            "+    <sequence name=\"main\" onError=\"errorHandler\">\n", 
            "+        <in>\n", 
            "+            <property name=\"OUT_ONLY\" value=\"true\" />\n", 
            "+            <property name=\"FORCE_SC_ACCEPTED\" scope=\"axis2\" value=\"true\" />\t\n", 
            "+            <send>\n", 
            "+                <endpoint>\n", 
            "+                    <!--List of Recipients (static)--> \n", 
            "+                    <recipientlist>\n", 
            "+                        <endpoint>\n", 
            "+                            <address uri=\"http://localhost:9001/services/SimpleStockQuoteService\"/>\n", 
            "+                        </endpoint>\n", 
            "+                        <endpoint>\n", 
            "+                            <address uri=\"http://localhost:9002/services/SimpleStockQuoteService\"/>\n", 
            "+                        </endpoint>\n", 
            "+\t\t\t<endpoint>\n", 
            "+                            <address uri=\"http://localhost:9003/services/SimpleStockQuoteService\"/>\n", 
            "+                        </endpoint>\n", 
            "+                    </recipientlist>\n", 
            "+                </endpoint>\n", 
            "+            </send>\n", 
            "+            <drop/>\n", 
            "+        </in>\n", 
            "+    </sequence>\n", 
            "+\n", 
            "+    <sequence name=\"errorHandler\">\n", 
            "+        <makefault response=\"true\">\n", 
            "+            <code xmlns:tns=\"http://www.w3.org/2003/05/soap-envelope\" value=\"tns:Receiver\"/>\n", 
            "+            <reason value=\"COULDN'T SEND THE MESSAGE TO THE SERVER.\"/>\n", 
            "+        </makefault>\n", 
            "+        <send/>\n", 
            "+    </sequence>\n", 
            "+</definitions>\n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/synapse_sample_61.xml", 
      "from": "java/repository/conf/sample/synapse_sample_61.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-0,0 +1,54", 
          "lines": [
            "+<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n", 
            "+<!--\n", 
            "+  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "+  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "+  ~  distributed with this work for additional information\n", 
            "+  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "+  ~  to you under the Apache License, Version 2.0 (the\n", 
            "+  ~  \"License\"); you may not use this file except in compliance\n", 
            "+  ~  with the License.  You may obtain a copy of the License at\n", 
            "+  ~\n", 
            "+  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "+  ~\n", 
            "+  ~  Unless required by applicable law or agreed to in writing,\n", 
            "+  ~  software distributed under the License is distributed on an\n", 
            "+  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "+  ~  KIND, either express or implied.  See the License for the\n", 
            "+  ~  specific language governing permissions and limitations\n", 
            "+  ~  under the License.\n", 
            "+  -->\n", 
            "+<!--Routing message to dynamic recipients-->        \n", 
            "+<definitions xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+\n", 
            "+    <!-- the SimpleURLRegistry allows access to a URL based registry (e.g. file:/// or http://) -->\n", 
            "+    <registry provider=\"org.apache.synapse.registry.url.SimpleURLRegistry\">\n", 
            "+        <!-- the root property of the simple URL registry helps resolve a resource URL as root + key -->\n", 
            "+        <parameter name=\"root\">file:repository/conf/sample/resources/</parameter>\n", 
            "+        <!-- all resources loaded from the URL registry would be cached for this number of milli seconds -->\n", 
            "+        <parameter name=\"cachableDuration\">15000</parameter>\n", 
            "+    </registry>  \n", 
            "+\t\n", 
            "+    <sequence name=\"main\" onError=\"errorHandler\">\n", 
            "+        <in>\n", 
            "+            <property name=\"OUT_ONLY\" value=\"true\" />\n", 
            "+            <property name=\"FORCE_SC_ACCEPTED\" scope=\"axis2\" value=\"true\" />\t\n", 
            "+\t    <!--Dynamic Reclipient List-->\t\n", 
            "+            <send>\n", 
            "+                <endpoint>\n", 
            "+                    <recipientlist>\n", 
            "+                        <endpoints value=\"{get-property('registry','recipients/EP_LIST')}\"/>\n", 
            "+                    </recipientlist>\n", 
            "+                </endpoint>\n", 
            "+            </send>\n", 
            "+            <drop/>\n", 
            "+        </in>\n", 
            "+    </sequence>\n", 
            "+\n", 
            "+    <sequence name=\"errorHandler\">\n", 
            "+        <makefault response=\"true\">\n", 
            "+            <code xmlns:tns=\"http://www.w3.org/2003/05/soap-envelope\" value=\"tns:Receiver\"/>\n", 
            "+            <reason value=\"COULDN'T SEND THE MESSAGE TO THE SERVER.\"/>\n", 
            "+        </makefault>\n", 
            "+        <send/>\n", 
            "+    </sequence>\n", 
            "+</definitions>\n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/synapse_sample_62.xml", 
      "from": "java/repository/conf/sample/synapse_sample_62.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-0,0 +1,63", 
          "lines": [
            "+<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n", 
            "+<!--\n", 
            "+  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "+  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "+  ~  distributed with this work for additional information\n", 
            "+  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "+  ~  to you under the Apache License, Version 2.0 (the\n", 
            "+  ~  \"License\"); you may not use this file except in compliance\n", 
            "+  ~  with the License.  You may obtain a copy of the License at\n", 
            "+  ~\n", 
            "+  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "+  ~\n", 
            "+  ~  Unless required by applicable law or agreed to in writing,\n", 
            "+  ~  software distributed under the License is distributed on an\n", 
            "+  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "+  ~  KIND, either express or implied.  See the License for the\n", 
            "+  ~  specific language governing permissions and limitations\n", 
            "+  ~  under the License.\n", 
            "+  -->\n", 
            "+<!--Route message to dynamic Recipients and aggregate their responses-->        \n", 
            "+<definitions xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+\n", 
            "+    <!-- the SimpleURLRegistry allows access to a URL based registry (e.g. file:/// or http://) -->\n", 
            "+    <registry provider=\"org.apache.synapse.registry.url.SimpleURLRegistry\">\n", 
            "+        <!-- the root property of the simple URL registry helps resolve a resource URL as root + key -->\n", 
            "+        <parameter name=\"root\">file:repository/conf/sample/resources/</parameter>\n", 
            "+        <!-- all resources loaded from the URL registry would be cached for this number of milli seconds -->\n", 
            "+        <parameter name=\"cachableDuration\">15000</parameter>\n", 
            "+    </registry>  \n", 
            "+     \t\n", 
            "+    <sequence name=\"main\" onError=\"errorHandler\">\n", 
            "+        <in>\n", 
            "+\t    <!--Dynamic Recipient List-->\t\n", 
            "+            <send>\n", 
            "+                <endpoint>\n", 
            "+                   <recipientlist>\n", 
            "+                        <endpoints value=\"{get-property('registry','recipients/EP_LIST')}\"/>\n", 
            "+                    </recipientlist>\n", 
            "+                </endpoint>\n", 
            "+            </send>\n", 
            "+            <drop/>\n", 
            "+        </in>\n", 
            "+\n", 
            "+        <out>\n", 
            "+\t    <log level=\"full\"/>\n", 
            "+\t    <!--Aggregate responses-->\n", 
            "+            <aggregate> \n", 
            "+              <onComplete xmlns:m0=\"http://services.samples\"\n", 
            "+                          expression=\"//m0:getQuoteResponse\">\n", 
            "+                 <send/>\n", 
            "+\t      </onComplete>    \t\t\n", 
            "+\t    </aggregate>\n", 
            "+        </out>\n", 
            "+    </sequence>\n", 
            "+\n", 
            "+    <sequence name=\"errorHandler\">\n", 
            "+        <makefault response=\"true\">\n", 
            "+            <code xmlns:tns=\"http://www.w3.org/2003/05/soap-envelope\" value=\"tns:Receiver\"/>\n", 
            "+            <reason value=\"COULDN'T SEND THE MESSAGE TO THE SERVER.\"/>\n", 
            "+        </makefault>\n", 
            "+        <send/>\n", 
            "+    </sequence>\n", 
            "+</definitions>\n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/synapse_sample_63.xml", 
      "from": "java/repository/conf/sample/synapse_sample_63.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-0,0 +1,1", 
          "lines": [
            "+http://localhost:9001/services/SimpleStockQuoteService,http://localhost:9002/services/SimpleStockQuoteService,http://localhost:9003/services/SimpleStockQuoteService\n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/resources/recipients/EP_LIST", 
      "from": "java/repository/conf/sample/resources/recipients/EP_LIST"
    }
  ], 
  "id": "1221091"
}