{
  "when": "2013-08-13T01:11:05-04:00", 
  "who": "hiranya", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-875,7 +875,7", 
          "lines": [
            "                         the Pass Through transport thread pool. Once a thread in the pool has\n", 
            "                         been idle for this duration, it will be removed from the pool and\n", 
            "                         destroyed. This reduces the size of the thread pool, but the thread pool\n", 
            "-                        size is not allowed drop below the value of the worker_pool_size_core\n", 
            "+                        size is not to allowed drop below the value of the worker_pool_size_core\n", 
            "                         property.\n", 
            "                         <div class=\"xmlConf\">worker_thread_keepalive_sec=10</div>\n", 
            "                     </td>\n"
          ]
        }, 
        {
          "locn": "-904,23 +904,24", 
          "lines": [
            "                 Pass Through HTTP transport. At least, consider tuning the worker_pool_size_core\n", 
            "                 and worker_pool_size_max to match the expected load in your deployment.\n", 
            "             </p>\n", 
            "-            <p>\n", 
            "-                Users deploying Synapse on Unix/Linux systems are further advised to set the\n", 
            "-                following OS level configuration parameters. This is completely optional, but\n", 
            "-                for high-throughput and high-volume deployments, configuring these parameters\n", 
            "-                may be crucial.\n", 
            "-            </p>\n", 
            "-            <ul>\n", 
            "-                <li>\n", 
            "-                    Increase the limit on open file descriptors by editing the\n", 
            "-                    /etc/security/limits.conf file.\n", 
            "-                    <div class=\"xmlConf\">* soft nofile 4096\n", 
            "+            <subsection name=\"Unix/Linux Specific Settings\" id=\"LinuxSettings\">\n", 
            "+                <p>\n", 
            "+                    Users deploying Synapse on Unix/Linux systems are further advised to set the\n", 
            "+                    following OS level configuration parameters. This is completely optional, but\n", 
            "+                    for high-throughput and high-volume deployments, configuring these parameters\n", 
            "+                    may be crucial.\n", 
            "+                </p>\n", 
            "+                <ul>\n", 
            "+                    <li>\n", 
            "+                        Increase the limit on open file descriptors by editing the\n", 
            "+                        /etc/security/limits.conf file.\n", 
            "+                        <div class=\"xmlConf\">* soft nofile 4096\n", 
            " * hard nofile 65535</div>\n", 
            "-                </li>\n", 
            "-                <li>\n", 
            "-                    Increase the TCP port range and optimize other TCP settings in the\n", 
            "-                    /etc/sysctl.conf file.\n", 
            "-                    <div class=\"xmlConf\">net.ipv4.tcp_fin_timeout = 30\n", 
            "+                    </li>\n", 
            "+                    <li>\n", 
            "+                        Increase the TCP port range and optimize other TCP settings in the\n", 
            "+                        /etc/sysctl.conf file.\n", 
            "+                        <div class=\"xmlConf\">net.ipv4.tcp_fin_timeout = 30\n", 
            " fs.file-max = 2097152\n", 
            " net.ipv4.tcp_tw_recycle = 1\n", 
            " net.ipv4.tcp_tw_reuse = 1\n"
          ]
        }, 
        {
          "locn": "-931,8 +932,165", 
          "lines": [
            " net.ipv4.tcp_rmem = 4096 87380 16777216\n", 
            " net.ipv4.tcp_wmem = 4096 65536 16777216\n", 
            " net.ipv4.ip_local_port_range = 1024 65535</div>\n", 
            "-                </li>\n", 
            "-            </ul>\n", 
            "+                    </li>\n", 
            "+                </ul>\n", 
            "+            </subsection>\n", 
            "         </section>\n", 
            "+        <section name=\"Logging Configuration\" id=\"Logging\">\n", 
            "+            <p>\n", 
            "+                <strong>Note: This section is applicable to both Pass Through and NHTTP transports of\n", 
            "+                Synapse.</strong>\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                Synapse HTTP transports have some advanced logging capabilities built in to them,\n", 
            "+                which can be enabled to obtain more low-level information about how the transports\n", 
            "+                operate. These logging features are based on\n", 
            "+                <a href=\"http://commons.apache.org/proper/commons-logging/\">Apache Commons Logging</a>\n", 
            "+                and Log4J, which constitute the logging framework used by Apache Synapse. Therefore,\n", 
            "+                these features should be enabled from the log4j.properties file, which can be found\n", 
            "+                in the lib directory of the Synapse installation.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                Advanced logging for HTTP transports is activated by setting the log level to DEBUG\n", 
            "+                on a set of predefined logging categories. These categories are already listed in\n", 
            "+                the default log4j.properties file that ships with Synapse, and you only need to\n", 
            "+                uncomment them to use the advanced logging features. Please note that changes to\n", 
            "+                log4j.properties file are not picked up at runtime, and therefore you must restart\n", 
            "+                Synapse for the changes to take effect. A complete listing of the logging categories\n", 
            "+                related to Synapse HTTP transports is given below.\n", 
            "+            </p>\n", 
            "+            <dl>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.headers=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the headers of all the HTTP messages received and sent by\n", 
            "+                    Synapse.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.headers.SourceHeaders=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the headers of all the HTTP messages exchanged between client\n", 
            "+                    applications and Synapse.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.headers.TargetHeaders=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the headers of all the HTTP messages exchanged between Synapse\n", 
            "+                    and backend servers.\n", 
            "+                </dd>\n", 
            "+            </dl>\n", 
            "+            <dl>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.wire=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the complete wire-level messages received and sent by Synapse.\n", 
            "+                    This will log HTTP headers as well message bodies.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.wire.SourceWire=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the complete wire-level messages exchanged between client\n", 
            "+                    applications and Synapse.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.wire.TargetWire=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging the complete wire-level messages exchanged between Synapse\n", 
            "+                    and backend servers.\n", 
            "+                </dd>\n", 
            "+            </dl>\n", 
            "+            <dl>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.conn=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for all HTTP connections. This will log all the significant events\n", 
            "+                    that occur on HTTP connections during their life cycles. Some of these events\n", 
            "+                    include read, write and shutdown.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.conn.SourceConnection=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for HTTP connections established between client applications and\n", 
            "+                    Synapse.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.conn.TargetConnection=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for HTTP connections established between Synapse and backend\n", 
            "+                    servers.\n", 
            "+                </dd>\n", 
            "+            </dl>\n", 
            "+            <dl>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.session=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for all I/O sessions. This will log all the significant events\n", 
            "+                    that occur on HTTP I/O sessions during their life cycles. Some of these events\n", 
            "+                    include setting NIO interest ops, read, write and shutdown.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.session.SourceSession=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for I/O sessions established between client applications and\n", 
            "+                    Synapse.\n", 
            "+                </dd>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http.session.TargetSession=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables logging for I/O sessions established between Synapse and backend\n", 
            "+                    servers.\n", 
            "+                </dd>\n", 
            "+            </dl>\n", 
            "+            <dl>\n", 
            "+                <dt>\n", 
            "+                    <tt>log4j.category.org.apache.synapse.transport.http=DEBUG</tt>\n", 
            "+                </dt>\n", 
            "+                <dd>\n", 
            "+                    Enables all the advanced logging features (all listed above).\n", 
            "+                </dd>\n", 
            "+            </dl>\n", 
            "+            <subsection name=\"Guidelines for Using Advanced Logging\" id=\"LoggingGuidelines\">\n", 
            "+                <p>\n", 
            "+                    Most of the above advanced logging features have been designed to aid Synapse developers\n", 
            "+                    in identifying problems and fixing issues in the Synapse HTTP transports. However,\n", 
            "+                    they are also useful to the Synapse users and system administrators when debugging\n", 
            "+                    configuration errors and certain types of integration problems. For instance, if you\n", 
            "+                    ever come across a situation where Synapse behaves erratically when communicating\n", 
            "+                    with a particular client or a server, enabling some of the above mentioned logging\n", 
            "+                    features may help you pinpoint the cause of the issue.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    Please bare in mind that you trade mediation performance for additional logging.\n", 
            "+                    As you enable more and more logging features, the performance degradation induced\n", 
            "+                    by logging becomes greater. Hence these advanced logging features are not suitable\n", 
            "+                    to be enabled on production deployments. However, they are quite helpful during the\n", 
            "+                    development and testing phases of an integration project. In a production deployment,\n", 
            "+                    you may occasionally need to enable advanced logging for short periods of time to obtain\n", 
            "+                    debug information to resolve certain production issues. But it is not recommended to\n", 
            "+                    have these features permanently enabled on production systems.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    Also note that activating advanced logging features may greatly increase the amount\n", 
            "+                    of data written to the Synapse log files. If the Synapse server is receiving a large\n", 
            "+                    volume of traffic, enabling any one of the above logging features may cause\n", 
            "+                    Synapse to generate gigabytes of logs within minutes. This could easily drive a\n", 
            "+                    system out of disk space or cause some other unexpected I/O issue. Therefore be\n", 
            "+                    mindful about how much extra information you want Synapse to log, the prevailing\n", 
            "+                    levels of load/traffic and the availability of hardware resources.\n", 
            "+                </p>\n", 
            "+            </subsection>\n", 
            "+        </section>\n", 
            "     </body>\n", 
            " </document>\n", 
            "\\ No newline at end of file\n"
          ]
        }
      ], 
      "to": "java/modules/documentation/src/site/xdoc/userguide/transports/pass_through.xml", 
      "from": "java/modules/documentation/src/site/xdoc/userguide/transports/pass_through.xml"
    }
  ], 
  "id": "1513348"
}