{
  "when": "2011-12-20T06:58:12-05:00", 
  "message": "config language guide", 
  "who": "hiranya", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-361,27 +361,27", 
          "lines": [
            "                 hierarchy.\n", 
            "             </p>\n", 
            "             <div class=\"consoleOutput\">synapse-config\n", 
            "-            |-- api\n", 
            "-            |-- endpoints\n", 
            "-            |   `-- foo.xml\n", 
            "-            |-- events\n", 
            "-            |   `-- event1.xml\n", 
            "-            |-- local-entries\n", 
            "-            |   `-- bar.xml\n", 
            "-            |-- priority-executors\n", 
            "-            |-- proxy-services\n", 
            "-            |   |-- proxy1.xml\n", 
            "-            |   |-- proxy2.xml\n", 
            "-            |   `-- proxy3.xml\n", 
            "-            |-- registry.xml\n", 
            "-            |-- sequences\n", 
            "-            |   |-- custom-logger.xml\n", 
            "-            |   |-- fault.xml\n", 
            "-            |   `-- main.xml\n", 
            "-            |-- synapse.xml\n", 
            "-            |-- tasks\n", 
            "-            |   `-- task1.xml</div>\n", 
            "-            `-- templates\n", 
            "+    |-- api\n", 
            "+    |-- endpoints\n", 
            "+    |   `-- foo.xml\n", 
            "+    |-- events\n", 
            "+    |   `-- event1.xml\n", 
            "+    |-- local-entries\n", 
            "+    |   `-- bar.xml\n", 
            "+    |-- priority-executors\n", 
            "+    |-- proxy-services\n", 
            "+    |   |-- proxy1.xml\n", 
            "+    |   |-- proxy2.xml\n", 
            "+    |   `-- proxy3.xml\n", 
            "+    |-- registry.xml\n", 
            "+    |-- sequences\n", 
            "+    |   |-- custom-logger.xml\n", 
            "+    |   |-- fault.xml\n", 
            "+    |   `-- main.xml\n", 
            "+    |-- synapse.xml\n", 
            "+    |-- tasks\n", 
            "+    |   `-- task1.xml\n", 
            "+    `-- templates</div>\n", 
            "         </section>\n", 
            "         <section name=\"Configuration Syntax\">\n", 
            "             <p>\n"
          ]
        }, 
        {
          "locn": "-452,5 +452,117", 
          "lines": [
            "                 expires. (e.g. Check the WSO2 ESB implementation based on Apache Synapse)\n", 
            "             </p>\n", 
            "         </section>\n", 
            "+        <section name=\"Local Entries (Local Registry)\">\n", 
            "+            <p>\n", 
            "+                Local entries provide a convenient way to import various external configuration\n", 
            "+                artifacts into the Synapse runtime. This includes WSDLs, policies, XSLT files,\n", 
            "+                and scripts. Local entry definitions are parsed at server startup and the referenced\n", 
            "+                configurations are loaded to the memory where they will remain until the server is\n", 
            "+                shut down. Other functional components such as sequences, endpoints and proxy services\n", 
            "+                can refer these locally defined in-memory configuration elements by using the local\n", 
            "+                entry keys.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                The &lt;localEntry&gt; element is used to declare registry entries that are local\n", 
            "+                to the Synapse instance. Following syntax is used to define a local entry in the\n", 
            "+                Synapse configuration.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;localEntry key=\"string\" [src=\"url\"]&gt;text | xml&lt;/localEntry&gt;</div>\n", 
            "+            <p>\n", 
            "+                A local entry may contain static text or static XML specified as inline content.\n", 
            "+                Following examples show how such static content can be included in local entry\n", 
            "+                definitions.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;localEntry key=\"version\"&gt;0.1&lt;/localEntry&gt;\n", 
            "+\n", 
            "+&lt;localEntry key=\"validate_schema\"&gt;\n", 
            "+    &lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n", 
            "+     ...\n", 
            "+    &lt;/xs:schema&gt;\n", 
            "+&lt;/localEntry&gt;</div>\n", 
            "+            <p>\n", 
            "+                Note the validate_schema local entry which wraps some static XML schema content. A\n", 
            "+                mediator such as the validate mediator can refer this local entry to load its XML\n", 
            "+                schema definition.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                A local entry may also point to a remote URL (specified using the 'src'\n", 
            "+                attribute) from which the contents can be loaded. This way the user does not have\n", 
            "+                to specify all external configurations in the Synapse configuration itself. The\n", 
            "+                required artifacts can be kept on the file system or hosted on a web server from where\n", 
            "+                Synapse can fetch them using a local entry definition. Following example shows\n", 
            "+                how a local entry is configured to load an XSLT file from the local file system.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;localEntry key=\"xslt-key-req\" src=\"file:repository/conf/sample/resources/transform/transform.xslt\"/&gt;</div>\n", 
            "+            <p>\n", 
            "+                It is important to note that Synapse loads the local entry contents only during\n", 
            "+                server start up (even when they are defined with a remote URL). Therefore any\n", 
            "+                changes done on the remote artifacts will not reflect on Synapse until the server\n", 
            "+                is restarted. This is in contrast to the behavior with remote registry where\n", 
            "+                Synapse reloads configuration artifacts as soon as the cache period expires.\n", 
            "+            </p>\n", 
            "+        </section>\n", 
            "+        <section name=\"Sequences\" id=\"sequences\">\n", 
            "+            <p>\n", 
            "+                As explained earlier a sequence resembles a message flow in Synapse and consists\n", 
            "+                of an array of mediators. The &lt;sequence&gt; element is used to define a sequence\n", 
            "+                in the Synapse configuration.  Sequences can be defined with names so they can be\n", 
            "+                reused across the Synapse configuration. The sequences named 'main' and 'fault' have\n", 
            "+                special significance in a Synapse configuration. The 'main' sequence handles any message\n", 
            "+                that is accepted for '<a href=\"#message_mediation\">Message Mediation</a>'. The\n", 
            "+                'fault' sequence is invoked if Synapse encounters a fault, and a custom fault handler\n", 
            "+                is not specified for the sequence via its 'onError' attribute. If the 'main' or\n", 
            "+                'fault' sequences are not defined locally or not found in the Registry, Synapse\n", 
            "+                auto generates suitable defaults at initialization.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                A Dynamic Sequence may be defined by specifying a key reference to a registry entry.\n", 
            "+                As the remote registry entry changes, the sequence will dynamically be updated\n", 
            "+                according to the specified cache duration and expiration. If tracing is enabled on a\n", 
            "+                sequence, all messages being processed through the sequence would write tracing\n", 
            "+                information through each mediation step to the 'trace.log' file configured via the\n", 
            "+                log4j.properties configuration.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                The syntax outline of a sequence definition is given below.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;sequence name=\"string\" [onError=\"string\"] [key=\"string\"] [trace=\"enable\"] [statistics=\"enable\"]&gt;\n", 
            "+    mediator*\n", 
            "+ &lt;/sequence&gt;</div>\n", 
            "+            <p>\n", 
            "+                The 'onError' attribute can be used to define a custom error handler sequence.\n", 
            "+                Statistics collection can be activated by setting the 'statistics' attribute to\n", 
            "+                'enable' on the sequence. In this mode the sequence will keep track of the number\n", 
            "+                of messages processed and their processing times. This statistical information can\n", 
            "+                then be retrieved through the Synapse statistics API.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                All the immediate child elements of the sequence element must be valid mediators.\n", 
            "+                Following example shows a sequence configuration which consists of three child\n", 
            "+                mediators.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;sequence name=\"main\" onError=\"errorHandler\"&gt;\n", 
            "+    &lt;log/&gt;\n", 
            "+    &lt;property name=\"test\" value=\"test value\"/&gt;\n", 
            "+    &lt;send/&gt;\n", 
            "+&lt;/sequence&gt;</div>\n", 
            "+            <p>\n", 
            "+                Sequences can also hand over messages to other sequences. In this sense a sequence\n", 
            "+                is analogous to a procedure in a larger program. In many programming languages\n", 
            "+                procedures can invoke other procedures. See the following example sequence\n", 
            "+                configuration.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;sequence name=\"foo\"&gt;\n", 
            "+    &lt;log/&gt;\n", 
            "+    &lt;property name=\"test\" value=\"test value\"/&gt;\n", 
            "+    &lt;sequence key=\"other_sequence\"/&gt;\n", 
            "+    &lt;send/&gt;\n", 
            "+&lt;/sequence&gt;</div>\n", 
            "+            <p>\n", 
            "+                Note how the message is handed to a sequence named 'other_sequence' using the\n", 
            "+                'sequence' element. The 'key' attribute could point to another named sequence, a\n", 
            "+                local entry or a remote registry entry.\n", 
            "+            </p>\n", 
            "+        </section>\n", 
            "     </body>\n", 
            " </document>\n", 
            "\\ No newline at end of file\n"
          ]
        }
      ], 
      "to": "scratch/hiranya/website/src/site/xdoc/userguide/config.xml", 
      "from": "scratch/hiranya/website/src/site/xdoc/userguide/config.xml"
    }
  ], 
  "id": "1221214"
}