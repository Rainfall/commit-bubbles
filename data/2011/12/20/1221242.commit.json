{
  "when": "2011-12-20T08:03:47-05:00", 
  "message": "config language guide", 
  "who": "hiranya", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-564,5 +564,153", 
          "lines": [
            "                 local entry or a remote registry entry.\n", 
            "             </p>\n", 
            "         </section>\n", 
            "+        <section name=\"Endpoints\" id=\"endpoints\">\n", 
            "+            <p>\n", 
            "+                An &lt;endpoint&gt; element defines a destination for an outgoing message. There\n", 
            "+                are several types of endpoints that can be defined in a Synapse configuration.\n", 
            "+            </p>\n", 
            "+            <ul>\n", 
            "+                <li>Address endpoint</li>\n", 
            "+                <li>WSDL endpoint</li>\n", 
            "+                <li>Load balance endpoint</li>\n", 
            "+                <li>Fail-over endpoint</li>\n", 
            "+                <li>Default endpoint</li>\n", 
            "+                <li>Recipient list endpoint</li>\n", 
            "+            </ul>\n", 
            "+            <p>\n", 
            "+                Configuration syntax and runtime semantics of these endpoint types differ from\n", 
            "+                each other. However the high level configuration syntax of an endpoint definition\n", 
            "+                takes the following form.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;endpoint [name=\"string\"] [key=\"string\"]&gt;\n", 
            "+    <a href=\"#address-endpoint\">address-endpoint</a> | <a href=\"#default-endpoint\">default-endpoint</a> | <a href=\"#wsdl-endpoint\">wsdl-endpoint</a> |\n", 
            "+    <a href=\"#load-balanced-endpoint\">load-balanced-endpoint</a> | <a href=\"#fail-over-endpoint\">fail-over-endpoint</a> |\n", 
            "+    <a href=\"#recipient-list-endpoint\">recipient-list-endpoint</a>\n", 
            "+&lt;/endpoint&gt;</div>\n", 
            "+            <p>\n", 
            "+                Note how the endpoint definitions always start with an 'endpoint' element. The\n", 
            "+                immediate child element of this top level 'endpoint' element determines the type of\n", 
            "+                the endpoint. All above endpoint types can have a 'name' attribute, and such named\n", 
            "+                endpoints can be referred by other endpoints, through the key attribute. For example\n", 
            "+                if there is an endpoint named 'foo', the following endpoint can be used in any place,\n", 
            "+                where 'foo' has to be used.\n", 
            "+            </p>\n", 
            "+            <div class=\"xmlConf\">&lt;endpoint key=\"foo\"/&gt;</div>\n", 
            "+            <p>\n", 
            "+                This provides a simple mechanism for reusing endpoint definitions within a Synapse\n", 
            "+                configuration.\n", 
            "+            </p>\n", 
            "+            <p>\n", 
            "+                The 'trace' attribute turns on detailed trace information for messages being sent\n", 
            "+                to the endpoint. These will be available in the 'trace.log' file configured via the\n", 
            "+                log4j.properties file.\n", 
            "+            </p>\n", 
            "+            <subsection name=\"Address Endpoint\">\n", 
            "+                <div class=\"xmlConf\">&lt;address uri=\"<em>endpoint address</em>\" [format=\"soap11|soap12|pox|get\"] [optimize=\"mtom|swa\"]\n", 
            "+         [encoding=\"<em>charset encoding</em>\"]\n", 
            "+         [statistics=\"enable|disable\"] [trace=\"enable|disable\"]&gt;\n", 
            "+  &lt;enableRM [policy=\"<em>key</em>\"]/&gt;?\n", 
            "+  &lt;enableSec [policy=\"<em>key</em>\"]/&gt;?\n", 
            "+  &lt;enableAddressing [version=\"final|submission\"] [separateListener=\"true|false\"]/&gt;?\n", 
            "+\n", 
            "+  &lt;timeout&gt;\n", 
            "+    &lt;duration&gt;<em>timeout duration in milliseconds</em>&lt;/duration&gt;\n", 
            "+    &lt;responseAction&gt;discard|fault&lt;/responseAction&gt;\n", 
            "+  &lt;/timeout&gt;?\n", 
            "+\n", 
            "+  &lt;markForSuspension&gt;\n", 
            "+        [&lt;errorCodes&gt;xxx,yyy&lt;/errorCodes&gt;]\n", 
            "+        &lt;retriesBeforeSuspension&gt;m&lt;/retriesBeforeSuspension&gt;\n", 
            "+        &lt;retryDelay&gt;d&lt;/retryDelay&gt;\n", 
            "+    &lt;/markForSuspension&gt;\n", 
            "+\n", 
            "+  &lt;suspendOnFailure&gt;\n", 
            "+        [&lt;errorCodes&gt;xxx,yyy&lt;/errorCodes&gt;]\n", 
            "+        &lt;initialDuration&gt;n&lt;/initialDuration&gt;\n", 
            "+        &lt;progressionFactor&gt;r&lt;/progressionFactor&gt;\n", 
            "+        &lt;maximumDuration&gt;l&lt;/maximumDuration&gt;\n", 
            "+    &lt;/suspendOnFailure&gt;\n", 
            "+&lt;/address&gt;</div>\n", 
            "+                <p>\n", 
            "+                    Address endpoint is an endpoint defined by specifying the EPR and other\n", 
            "+                    attributes of the endpoint directly in the configuration. The 'uri' attribute\n", 
            "+                    of the address element contains the EPR of the target endpoint. Message format\n", 
            "+                    for the endpoint and the method to optimize attachments can be specified in the\n", 
            "+                    'format' and 'optimize' attributes respectively. Reliable messaging and security\n", 
            "+                    policies for the endpoint can be specified in the policy attribute of the\n", 
            "+                    'enableRM' and 'enableSec' elements respectively. WS-Addressing can be engaged\n", 
            "+                    for the messages sent to the endpoint by using the 'enableAddressing' element.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    The 'timeout' element of the endpoint configuration is used to set a specific\n", 
            "+                    socket timeout for the endpoint. By default this is set to 1 minute (60 seconds).\n", 
            "+                    When integrating with back-end services which take longer to respond the timeout\n", 
            "+                    duration should be increased accordingly. The 'responseAction' element states\n", 
            "+                    the action that should be taken in case a response is received after the timeout\n", 
            "+                    period has elapsed. Synapse can either 'discard' the delayed response or inject it\n", 
            "+                    into a 'fault' handler.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    A Synapse endpoint is a state machine. At any given point in time it could be\n", 
            "+                    in one of four states - Active, Timeout, Suspended and Switched Off. How and\n", 
            "+                    when an endpoint changes its state is configurable through the Synapse configuration.\n", 
            "+                    An endpoint in suspended or switched off states cannot be used to send messages.\n", 
            "+                    Such an attempt would generate a runtime error.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    By default an endpoint is in the 'Active' state. The endpoint will continue to\n", 
            "+                    forward requests as long as its in this state. If an active endpoint encounters\n", 
            "+                    an error while trying to send a message out (eg: a connection failure), the\n", 
            "+                    endpoint may get pushed into the 'Timeout' state or the 'Suspended' state.\n", 
            "+                    Generally most errors will put the endpoint straight into the 'Suspended' state.\n", 
            "+                    Connection timeouts (error code 101504) and connection closed errors (101505)\n", 
            "+                    are the only errors that will not directly suspend an endpoint. Using the\n", 
            "+                    'errorCodes' element in the 'suspendOnFailure' configuration one can explicitly\n", 
            "+                    define the errors for which the endpoint should be suspended. Similarly the\n", 
            "+                    'errorCodes' element in the 'markForSuspension' configuration can be used to\n", 
            "+                    define the errors for which the endpoint should be pushed into the 'Timeout'\n", 
            "+                    state.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    Endpoints in 'Timeout' state can be used to send messages. But any consecutive\n", 
            "+                    errors while in this state can push the endpoint into the 'Suspended' state.\n", 
            "+                    The number of consecutive errors that can suspend the endpoint can be configured\n", 
            "+                    using the 'retriesBeforeSuspension' element in the 'markForSuspension' configuration.\n", 
            "+                    The 'retryDelay' is used to specify a duration for which an endpoint will not be\n", 
            "+                    available for immediate use after moving it to the 'Timeout' state. This duration\n", 
            "+                    should be specified in milliseconds.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    An endpoint in 'Suspended' state cannot be used to send messages. However the\n", 
            "+                    suspension is only temporary. The suspend duration can be configured using the\n", 
            "+                    'initialDuration' element. When this time period expires a suspended endpoint\n", 
            "+                    becomes available for use again. However any recurring errors can put the\n", 
            "+                    endpoint back in the 'Suspended' state. Such consecutive suspensions can also\n", 
            "+                    progressively increase the suspend duration of the endpoint as configured by the\n", 
            "+                    'progressionFactor' element. But the suspend duration will never exceed the\n", 
            "+                    period configured in the 'maximumDuration' element. Note that both 'initialDuration'\n", 
            "+                    and 'maximumDuration' should be specified in milliseconds.\n", 
            "+                </p>\n", 
            "+                <p>\n", 
            "+                    Some example address endpoint configurations are given below. Note how the\n", 
            "+                    communication protocol is used as a suffix to indicate the outgoing transport.\n", 
            "+                </p>\n", 
            "+                <table border=\"1\">\n", 
            "+                    <tbody>\n", 
            "+                        <tr><th>Transport</th><th>Sample address</th></tr>\n", 
            "+                        <tr><td>HTTP</td><td><tt>http://localhost:9000/services/SimpleStockQuoteService</tt></td></tr>\n", 
            "+                        <tr><td>JMS</td><td><tt>jms:/SimpleStockQuoteService?<br/>\n", 
            "+                          &#160;&#160;&#160;transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&amp;<br/>\n", 
            "+                          &#160;&#160;&#160;java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&amp;<br/>\n", 
            "+                          &#160;&#160;&#160;java.naming.provider.url=tcp://localhost:61616&amp;<br/>\n", 
            "+                          &#160;&#160;&#160;transport.jms.DestinationType=topic</tt></td></tr>\n", 
            "+                        <tr><td>Mail</td><td><tt>mailto:guest@host</tt></td></tr>\n", 
            "+                        <tr><td>VFS</td><td><tt>vfs:file:///home/user/directory</tt></td></tr>\n", 
            "+                        <tr><td/><td><tt>vfs:file:///home/user/file</tt></td></tr>\n", 
            "+                        <tr><td/><td><tt>vfs:ftp://guest:guest@localhost/directory?vfs.passive=true</tt></td></tr>\n", 
            "+                    </tbody>\n", 
            "+                </table>\n", 
            "+            </subsection>\n", 
            "+        </section>\n", 
            "     </body>\n", 
            " </document>\n", 
            "\\ No newline at end of file\n"
          ]
        }
      ], 
      "to": "scratch/hiranya/website/src/site/xdoc/userguide/config.xml", 
      "from": "scratch/hiranya/website/src/site/xdoc/userguide/config.xml"
    }
  ], 
  "id": "1221242"
}