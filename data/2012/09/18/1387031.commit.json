{
  "when": "2012-09-18T04:02:54-04:00", 
  "who": "veithen", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-1,87 +0,0", 
          "lines": [
            "-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n", 
            "-<!--\n", 
            "-  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "-  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "-  ~  distributed with this work for additional information\n", 
            "-  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "-  ~  to you under the Apache License, Version 2.0 (the\n", 
            "-  ~  \"License\"); you may not use this file except in compliance\n", 
            "-  ~  with the License.  You may obtain a copy of the License at\n", 
            "-  ~\n", 
            "-  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "-  ~\n", 
            "-  ~  Unless required by applicable law or agreed to in writing,\n", 
            "-  ~  software distributed under the License is distributed on an\n", 
            "-  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "-  ~  KIND, either express or implied.  See the License for the\n", 
            "-  ~  specific language governing permissions and limitations\n", 
            "-  ~  under the License.\n", 
            "-  -->\n", 
            "-\n", 
            "-<!--Distributed transacton example  -->\n", 
            "-\n", 
            "- <definitions xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "-\n", 
            "-<sequence name=\"myFaultHandler\">\n", 
            "-    <log level=\"custom\">\n", 
            "-        <property name=\"text\" value=\"** Rollback Transaction**\"/>\n", 
            "-    </log>\n", 
            "-    <transaction action=\"rollback\"/>\n", 
            "-    <send/>\n", 
            "-</sequence>\n", 
            "-\n", 
            "-<sequence name=\"main\" onError=\"myFaultHandler\">\n", 
            "-    <in>\n", 
            "-        <send>\n", 
            "-            <endpoint>\n", 
            "-                <address uri=\"http://localhost:9000/services/SimpleStockQuoteService\"/>\n", 
            "-            </endpoint>\n", 
            "-        </send>\n", 
            "-    </in>\n", 
            "-\n", 
            "-    <out>\n", 
            "-        <transaction action=\"new\"/>\n", 
            "-\n", 
            "-        <log level=\"custom\">\n", 
            "-            <property name=\"text\" value=\"** Reporting to the Database esbdb**\"/>\n", 
            "-        </log>\n", 
            "-        <dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "-            <connection>\n", 
            "-                <pool>\n", 
            "-                    <dsName>java:jdbc/XADerbyDS</dsName>\n", 
            "-                    <icClass>org.jnp.interfaces.NamingContextFactory</icClass>\n", 
            "-                    <url>localhost:1099</url>\n", 
            "-                    <user>synapse</user>\n", 
            "-                    <password>synapse</password>\n", 
            "-                </pool>\n", 
            "-            </connection>\n", 
            "-            <statement>\n", 
            "-                <sql>delete from company where name =?</sql>\n", 
            "-                <parameter expression=\"//m0:return/m1:symbol/child::text()\"\n", 
            "-                           xmlns:m0=\"http://services.samples\" xmlns:m1=\"http://services.samples/xsd\"\n", 
            "-                           type=\"VARCHAR\"/>\n", 
            "-            </statement>\n", 
            "-        </dbreport>\n", 
            "-\n", 
            "-        <log level=\"custom\">\n", 
            "-            <property name=\"text\" value=\"** Reporting to the Database esbdb1**\"/>\n", 
            "-        </log>\n", 
            "-        <dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "-            <connection>\n", 
            "-                <pool>\n", 
            "-                    <dsName>java:jdbc/XADerbyDS1</dsName>\n", 
            "-                    <icClass>org.jnp.interfaces.NamingContextFactory</icClass>\n", 
            "-                    <url>localhost:1099</url>\n", 
            "-                    <user>synapse</user>\n", 
            "-                    <password>synapse</password>\n", 
            "-                </pool>\n", 
            "-            </connection>\n", 
            "-            <statement>\n", 
            "-                <sql> INSERT into company values ('IBM','c4',12.0)</sql>\n", 
            "-            </statement>\n", 
            "-        </dbreport>\n", 
            "-        <transaction action=\"commit\"/>\n", 
            "-        <send/>\n", 
            "-    </out>\n", 
            "-</sequence>\n", 
            "-</definitions> \n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/synapse_sample_652.xml", 
      "from": "java/repository/conf/sample/synapse_sample_652.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-1,136 +0,0", 
          "lines": [
            "-<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n", 
            "-<!--\n", 
            "-  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "-  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "-  ~  distributed with this work for additional information\n", 
            "-  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "-  ~  to you under the Apache License, Version 2.0 (the\n", 
            "-  ~  \"License\"); you may not use this file except in compliance\n", 
            "-  ~  with the License.  You may obtain a copy of the License at\n", 
            "-  ~\n", 
            "-  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "-  ~\n", 
            "-  ~  Unless required by applicable law or agreed to in writing,\n", 
            "-  ~  software distributed under the License is distributed on an\n", 
            "-  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "-  ~  KIND, either express or implied.  See the License for the\n", 
            "-  ~  specific language governing permissions and limitations\n", 
            "-  ~  under the License.\n", 
            "-  -->\n", 
            "-\n", 
            "-<document>\n", 
            "-    <properties>\n", 
            "-        <title>Apache Synapse - Sample 652</title>\n", 
            "-    </properties>\n", 
            "-    <body>\n", 
            "-        <section name=\"Sample 652: Distributed transaction management\">\n", 
            "-            <div class=\"xmlConf\">&lt;definitions xmlns=\"http://ws.apache.org/ns/synapse\"&gt;\n", 
            "-\n", 
            "-&lt;sequence name=\"myFaultHandler\"&gt;\n", 
            "-    &lt;log level=\"custom\"&gt;\n", 
            "-        &lt;property name=\"text\" value=\"** Rollback Transaction**\"/&gt;\n", 
            "-    &lt;/log&gt;\n", 
            "-    &lt;transaction action=\"rollback\"/&gt;\n", 
            "-    &lt;send/&gt;\n", 
            "-&lt;/sequence&gt;\n", 
            "-\n", 
            "-&lt;sequence name=\"main\" onError=\"myFaultHandler\"&gt;\n", 
            "-    &lt;in&gt;\n", 
            "-        &lt;send&gt;\n", 
            "-            &lt;endpoint&gt;\n", 
            "-                &lt;address uri=\"http://localhost:9000/services/SimpleStockQuoteService\"/&gt;\n", 
            "-            &lt;/endpoint&gt;\n", 
            "-        &lt;/send&gt;\n", 
            "-    &lt;/in&gt;\n", 
            "-\n", 
            "-    &lt;out&gt;\n", 
            "-        &lt;transaction action=\"new\"/&gt;\n", 
            "-\n", 
            "-        &lt;log level=\"custom\"&gt;\n", 
            "-            &lt;property name=\"text\" value=\"** Reporting to the Database esbdb**\"/&gt;\n", 
            "-        &lt;/log&gt;\n", 
            "-        &lt;dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\"&gt;\n", 
            "-            &lt;connection&gt;\n", 
            "-                &lt;pool&gt;\n", 
            "-                    &lt;dsName&gt;java:jdbc/XADerbyDS&lt;/dsName&gt;\n", 
            "-                    &lt;icClass&gt;org.jnp.interfaces.NamingContextFactory&lt;/icClass&gt;\n", 
            "-                    &lt;url&gt;localhost:1099&lt;/url&gt;\n", 
            "-                    &lt;user&gt;synapse&lt;/user&gt;\n", 
            "-                    &lt;password&gt;synapse&lt;/password&gt;\n", 
            "-                &lt;/pool&gt;\n", 
            "-            &lt;/connection&gt;\n", 
            "-            &lt;statement&gt;\n", 
            "-                &lt;sql&gt;delete from company where name =?&lt;/sql&gt;\n", 
            "-                &lt;parameter expression=\"//m0:return/m1:symbol/child::text()\"\n", 
            "-                           xmlns:m0=\"http://services.samples\" xmlns:m1=\"http://services.samples/xsd\"\n", 
            "-                           type=\"VARCHAR\"/&gt;\n", 
            "-            &lt;/statement&gt;\n", 
            "-        &lt;/dbreport&gt;\n", 
            "-\n", 
            "-        &lt;log level=\"custom\"&gt;\n", 
            "-            &lt;property name=\"text\" value=\"** Reporting to the Database esbdb1**\"/&gt;\n", 
            "-        &lt;/log&gt;\n", 
            "-        &lt;dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\"&gt;\n", 
            "-            &lt;connection&gt;\n", 
            "-                &lt;pool&gt;\n", 
            "-                    &lt;dsName&gt;java:jdbc/XADerbyDS1&lt;/dsName&gt;\n", 
            "-                    &lt;icClass&gt;org.jnp.interfaces.NamingContextFactory&lt;/icClass&gt;\n", 
            "-                    &lt;url&gt;localhost:1099&lt;/url&gt;\n", 
            "-                    &lt;user&gt;synapse&lt;/user&gt;\n", 
            "-                    &lt;password&gt;synapse&lt;/password&gt;\n", 
            "-                &lt;/pool&gt;\n", 
            "-            &lt;/connection&gt;\n", 
            "-            &lt;statement&gt;\n", 
            "-                &lt;sql&gt; INSERT into company values ('IBM','c4',12.0)&lt;/sql&gt;\n", 
            "-            &lt;/statement&gt;\n", 
            "-        &lt;/dbreport&gt;\n", 
            "-        &lt;transaction action=\"commit\"/&gt;\n", 
            "-        &lt;send/&gt;\n", 
            "-    &lt;/out&gt;\n", 
            "-&lt;/sequence&gt;\n", 
            "-&lt;/definitions&gt;</div>\n", 
            "-            <subsection name=\"Objective\">\n", 
            "-                <p>\n", 
            "-\t\t\t\t\tDemonstrate the use of the transaction mediator in a distributed transaction\n", 
            "-                </p>\n", 
            "-            </subsection>\n", 
            "-            <subsection name=\"Pre-requisites\">\n", 
            "-                <p>\n", 
            "-                    <ul>\n", 
            "-                        <li>\n", 
            "-                              Deploy the SimpleStockQuoteService in the sample Axis2 server and start Axis2\n", 
            "-                              <p>To run this sample it is required to deploy synpase on JBoss application server(This is only tested with JBoss application sever), you\n", 
            "-                              can use the war distribution to deploy synapse on JBoss application server. Use the synpase_sample_652.xml as the synapse confiuration\n", 
            "-                              file and start JBoss with that synpase configuration file. Also you need to define two XA datasources for above two datasources.\n", 
            "-                              You'll need to refer JBoss documentation to see how to do this.</p>\n", 
            "-                              <p>\n", 
            "-                                It also required to have two database instances, this will be used by the two XA datasources.\n", 
            "-                                Refer the <a href=\"setup/db.html#derby\">Sample Setup Guide </a> to see how you can set up the derby database server.\n", 
            "-                              </p>\n", 
            "-                              <p>\n", 
            "-                                In this sample a record is delete from one database and it is added into the second database.\n", 
            "-                                If either of the operations(deleting from the 1st database and adding into the second database)\n", 
            "-                                fails everything will be roll backed. The records will be untoched.\n", 
            "-                              </p>\n", 
            "-                        </li>\n", 
            "-                        <li>\n", 
            "-                            Start Synapse using the configuration numbered 652 (repository/conf/sample/synapse_sample_652.xml)\n", 
            "-                            <div class=\"command\">\n", 
            "-                                Unix/Linux: sh synapse.sh -sample 652<br/>\n", 
            "-                                Windows: synapse.bat -sample 652\n", 
            "-                            </div>\n", 
            "-                        </li>\n", 
            "-                    </ul>\n", 
            "-                </p>\n", 
            "-            </subsection>\n", 
            "-            <subsection name=\"Executing the Client\">\n", 
            "-                <div class=\"command\">ant stockquote -Daddurl=http://localhost:9000/services/SimpleStockQuoteService -Dtrpurl=http://localhost:8280/</div>\n", 
            "-\n", 
            "-                <div class=\"consoleOutput\">Sat Nov 18 21:01:23 IST 2006 SimpleStockQuoteService :: Generating quote for : IBM</div>\n", 
            "-\n", 
            "-                <div class=\"consoleOutput\">Standard :: Stock price = $95.26454380258552</div>\n", 
            "-            </subsection>\n", 
            "-        </section>\n", 
            "-        <p><a href=\"../samples.html\">Back to Catalog</a></p>        \n", 
            "-    </body>\n", 
            "-</document>\n", 
            "\\ No newline at end of file\n"
          ]
        }
      ], 
      "to": "java/modules/documentation/src/site/xdoc/userguide/samples/sample652.xml", 
      "from": "java/modules/documentation/src/site/xdoc/userguide/samples/sample652.xml"
    }, 
    {
      "chunks": [
        {
          "locn": "-0,0 +1,87", 
          "lines": [
            "+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n", 
            "+<!--\n", 
            "+  ~  Licensed to the Apache Software Foundation (ASF) under one\n", 
            "+  ~  or more contributor license agreements.  See the NOTICE file\n", 
            "+  ~  distributed with this work for additional information\n", 
            "+  ~  regarding copyright ownership.  The ASF licenses this file\n", 
            "+  ~  to you under the Apache License, Version 2.0 (the\n", 
            "+  ~  \"License\"); you may not use this file except in compliance\n", 
            "+  ~  with the License.  You may obtain a copy of the License at\n", 
            "+  ~\n", 
            "+  ~   http://www.apache.org/licenses/LICENSE-2.0\n", 
            "+  ~\n", 
            "+  ~  Unless required by applicable law or agreed to in writing,\n", 
            "+  ~  software distributed under the License is distributed on an\n", 
            "+  ~   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n", 
            "+  ~  KIND, either express or implied.  See the License for the\n", 
            "+  ~  specific language governing permissions and limitations\n", 
            "+  ~  under the License.\n", 
            "+  -->\n", 
            "+\n", 
            "+<!--Distributed transacton example  -->\n", 
            "+\n", 
            "+ <definitions xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+\n", 
            "+<sequence name=\"myFaultHandler\">\n", 
            "+    <log level=\"custom\">\n", 
            "+        <property name=\"text\" value=\"** Rollback Transaction**\"/>\n", 
            "+    </log>\n", 
            "+    <transaction action=\"rollback\"/>\n", 
            "+    <send/>\n", 
            "+</sequence>\n", 
            "+\n", 
            "+<sequence name=\"main\" onError=\"myFaultHandler\">\n", 
            "+    <in>\n", 
            "+        <send>\n", 
            "+            <endpoint>\n", 
            "+                <address uri=\"http://localhost:9000/services/SimpleStockQuoteService\"/>\n", 
            "+            </endpoint>\n", 
            "+        </send>\n", 
            "+    </in>\n", 
            "+\n", 
            "+    <out>\n", 
            "+        <transaction action=\"new\"/>\n", 
            "+\n", 
            "+        <log level=\"custom\">\n", 
            "+            <property name=\"text\" value=\"** Reporting to the Database esbdb**\"/>\n", 
            "+        </log>\n", 
            "+        <dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+            <connection>\n", 
            "+                <pool>\n", 
            "+                    <dsName>java:jdbc/XADerbyDS</dsName>\n", 
            "+                    <icClass>org.jnp.interfaces.NamingContextFactory</icClass>\n", 
            "+                    <url>localhost:1099</url>\n", 
            "+                    <user>synapse</user>\n", 
            "+                    <password>synapse</password>\n", 
            "+                </pool>\n", 
            "+            </connection>\n", 
            "+            <statement>\n", 
            "+                <sql>delete from company where name =?</sql>\n", 
            "+                <parameter expression=\"//m0:return/m1:symbol/child::text()\"\n", 
            "+                           xmlns:m0=\"http://services.samples\" xmlns:m1=\"http://services.samples/xsd\"\n", 
            "+                           type=\"VARCHAR\"/>\n", 
            "+            </statement>\n", 
            "+        </dbreport>\n", 
            "+\n", 
            "+        <log level=\"custom\">\n", 
            "+            <property name=\"text\" value=\"** Reporting to the Database esbdb1**\"/>\n", 
            "+        </log>\n", 
            "+        <dbreport useTransaction=\"true\" xmlns=\"http://ws.apache.org/ns/synapse\">\n", 
            "+            <connection>\n", 
            "+                <pool>\n", 
            "+                    <dsName>java:jdbc/XADerbyDS1</dsName>\n", 
            "+                    <icClass>org.jnp.interfaces.NamingContextFactory</icClass>\n", 
            "+                    <url>localhost:1099</url>\n", 
            "+                    <user>synapse</user>\n", 
            "+                    <password>synapse</password>\n", 
            "+                </pool>\n", 
            "+            </connection>\n", 
            "+            <statement>\n", 
            "+                <sql> INSERT into company values ('IBM','c4',12.0)</sql>\n", 
            "+            </statement>\n", 
            "+        </dbreport>\n", 
            "+        <transaction action=\"commit\"/>\n", 
            "+        <send/>\n", 
            "+    </out>\n", 
            "+</sequence>\n", 
            "+</definitions> \n"
          ]
        }
      ], 
      "to": "java/repository/conf/sample/synapse_sample_410.xml", 
      "from": "java/repository/conf/sample/synapse_sample_410.xml"
    }
  ], 
  "id": "1387031"
}